<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>【文斌 & 静静】爱的小窝-我们的精彩</title>
<link rel="shortcut icon" href="/static/images/favicon.ico" type="image/x-icon" />
<link href="/static/css/style.css" rel="stylesheet" type="text/css">
<link href="/static/css/color.css" rel="stylesheet" type="text/css">
<link href="/static/css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
<link href="/static/css/bootstrap.css" rel="stylesheet" type="text/css">
<link href="/static/css/countdown.css" rel="stylesheet" type="text/css">
<link href="/static/css/prettyPhoto.css" rel="stylesheet">
<script type="text/javascript" src="/static/js/jquery-1.8.3.js"></script>
<script type="text/javascript" src="/static/js/mobile.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.js"></script>
<script type="text/javascript" src="/static/js/jquery.prettyPhoto.js"></script>
<script type="text/javascript" src="/static/js/lightbox.js"></script>
<script type="text/javascript" src="/static/js/jquery.cookie.js"></script>
<script type="text/javascript" src="/static/js/scrolltopcontrol.js"></script>
<style>
    .inner, .container{
        width: 100% !important;
    }
    body {
        padding-right:0px;
        padding-left:0px
    }
</style>
</head>
	<body>

<!--Background Image-->
<img src="/static/images/bg.jpg" id="background"/>
<!--Background Image-->
<!--WRAPPTER START-->
<div class="wrapepr floral-bg">
	<!--header start-->
    <div class="header">
        <div class="clearfix"></div>
        <div class="container">
        <div class="couple-name">
            <div class="couple-name-holder">
                <div class="first-name resize">
                	<h1>刘文斌</h1>
                </div>
                <img src="/static/images/heart3.png" style="margin-left: 10px"/>
                <div class="last-name resize">
                    <h1>陈晓静</h1>
                </div>
            </div>
        </div>
        <div class="inner">
        <div class="getting-merried">
        	<p>爱的小窝</p>
        </div>
        </div>
      </div>
      </div>
      <div class="clearfix"></div>
    <!--header start-->
    <div class="content">
        <div class="inner">
            <!--navigation start-->
            <div class="navigation relative">
            	<span class="border1 resize">
                	<span class="border2"></span>
                </span>
                <ul id="nav">
                    <li><a href="/static/index.html">首页</a></li>
                    <li><a href="/static/travel.html">我们的旅程</a></li>
                    <li><a href="/static/memory.html">我们的回忆</a></li>
                    <li><a href="/static/gallery.html">我们的精彩</a></li>
                    <li><a href="/static/privity.html">我们的默契</a></li>
                </ul>
            </div>
            <!--navigation end-->
            <div class="clearfix"></div>
            <!--content start-->
            <!--banners start-->
            	<div class="banner relative">
                	<img src="/static/images/banner-img.png" alt="">
                    <h2>我们的精彩</h2>
                	<div class="banner-pettern"></div>
                </div>
                <div class="clearfix"></div>
                <!--banners end-->
                <div class="top-borderline relative">
                	<div class="top-left-corner"><img src="/static/images/top-left-corner.png" alt=""></div>
                    <div class="top-right-corner"><img src="/static/images/top-right-corner.png" alt=""></div>
                </div>
            <div class="inner padding14px resize">
               <div class="bs-docs-example">
            <ul class="nav nav-tabs" id="myTab">
              <li style="float: none" class="active"><a id="title" data-toggle="tab" href="#"></a></li>
            </ul>
            <div class="tab-content padding26px" id="myTabContent">
              <div id="video" class="tab-pane fade active in">
                <div class="gallery-page">
               	<section id="gal-container1">
                    <ul class="cs_gal_2_column pretty-photos clearfix">
                        <li>
                            <div class="gallery_img relative">
                                <a href="" rel="prettyPhoto[gallery1]">
                                <img alt="" src="">
                                <div class="gallery_hover"></div>
                                </a>
                            </div>
                        </li>
                        <li>
                            <div class="gallery_img relative">
                                <a href="" rel="prettyPhoto[gallery1]">
                                <img alt="" src="">
                                <div class="gallery_hover"></div>
                                </a>
                            </div>
                        </li>
                        <li>
                            <div class="gallery_img relative">
                                <a href="" rel="prettyPhoto[gallery1]">
                                <img alt="" src="">
                                <div class="gallery_hover"></div>
                                </a>
                            </div>
                        </li>
                        <li>
                            <div class="gallery_img relative">
                                <a href="" rel="prettyPhoto[gallery1]">
                                <img alt="" src="">
                                <div class="gallery_hover"></div>
                                </a>
                            </div>
                        </li>
                        <li>
                            <div class="gallery_img relative">
                                <a href="" rel="prettyPhoto[gallery1]">
                                <img alt="" src="">
                                <div class="gallery_hover"></div>
                                </a>
                            </div>
                        </li>
                        <li>
                            <div class="gallery_img relative">
                                <a href="" rel="prettyPhoto[gallery1]">
                                <img alt="" src="">
                                <div class="gallery_hover"></div>
                                </a>
                            </div>
                        </li>
                    </ul>
                </section>
               </div>
              </div>
            </div>
          </div>
               <div class="gallery-pagination">
                   <ul id="pages"></ul>
               </div>

                <div class="register" style="padding:4px 0;text-align: center" id="totalPage"></div>
                <div class="clearfix"></div>
            </div>
            <!--content end-->
        </div>
    </div>
    <div class="clearfix"></div>
</div>
<script>
    var id = location.href.split("=")[1];
    if(id.indexOf("#") != -1){
        id = id.split("#")[0];
    }
    getImgByIdAndPage(id,1);
    function getImgByIdAndPage(id,page){
        $.ajax({
            url:"/getImageByIdPage",
            dataType: 'json',
            type:"POST",
            data:"id="+id+"&page="+page,
            success:function(data){
                var totalImgCount = data.totalImgCount;
                var totalPageNum = data.totalPageNum;
                var currentPageNum = data.currentPageNum;
                $("#totalPage").html("<b>有"+totalImgCount+"张照片，共"+totalPageNum + "页，当前是第"+currentPageNum+"页</b>");
                var pages = mathPages(currentPageNum,totalPageNum);
                var html = "<li onclick=\"getImgByIdAndPage('"+id+"',"+(currentPageNum - 1)+")\"><a href=\"javascript:;\">&nbsp;上一页&nbsp;</a></li>"
                for(var i = 0;i < pages.length;i++){
                    html += "<li onclick=\"getImgByIdAndPage('"+id+"',"+pages[i]+")\"><a href=\"javascript:;\">&nbsp;"+pages[i]+"&nbsp;</a></li>";
                }
                html += "<li onclick=\"getImgByIdAndPage('"+id+"',"+(currentPageNum + 1)+")\"><a href=\"javascript:;\">&nbsp;下一页&nbsp;</a></li>";
                $("#pages").html(html);
                $("#pages li:contains("+currentPageNum+")").html("<a href=\"javascript:;\"><font color='#f1a693'><b>"+currentPageNum+"</b></font></a>");

                $("#gal-container1 li").hide();
                $("#gal-container1 a").attr("href","");
                $("#gal-container1 img").attr("src","");
                $("#gal-container1").find("li").each(function (i,n) {
                    if(data.imgList[i] != undefined){
                        $(n).show();
                        $(n).find("a").attr("href",data.imgList[i]);
                        $(n).find("img").attr("src",data.imgList[i]);
                    }
                })
                $("#title").html(data.travelName);
            }
        });
    }

    function mathPages(index, totalpage) { //页码和一共有多少页
        //需要展现的页数
        var showPageCount = 9;
        var indexs = [];
        for(var i = 1; i <= totalpage; i++) {
            indexs.push(i);   //先根据总页数创建数组，将全部页标添加到数组中
        }
        if(totalpage<=showPageCount){
            return indexs;  //总页数<=6页时，直接输出即可
        }
        if(index<=2){
            indexs = indexs.slice(0,showPageCount);   //当前页<=2时，当前页的页标就不能显示在第三位了，直接截取0~6输出
            return indexs;
        }else{
            var indexs2 = indexs.slice(index-(showPageCount / 2),index+(showPageCount / 2));
            //如果当前页标>2，则从当前页标-3开始截取总页标数组，截取6个
            if(indexs2.length>=showPageCount){
                return indexs2;  //如果当前页不是倒数后3页，则截取没问题，直接输出
            }else{
                indexs2 = indexs.slice(-showPageCount);
                return indexs2;  //如果当前页是倒数后3页，就截取不到6个页标，那么直接最后截取6个页标即可
            }
        }
    }
</script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?18aa1da465cbe156fc3e7c413f9b2add";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>
